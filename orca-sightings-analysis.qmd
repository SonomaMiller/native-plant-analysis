---
title: "INFO370 Data Assignment 2: Clinical Design Support"
author: "Sonoma Miller, Carson G Miller Rigoli"
date: today
format:
  html:
    embed-resources: true
---

## Finding and Loading Data

```{r}
#install.packages("tidyverse")
#install.packages("infer")
library(tidyverse)
library(infer)

sightings <- read.csv("orca-sightings.csv", header = TRUE)

sightings$year_observed <- as.numeric(format(as.Date(sightings$observed_on, format="%Y-%m-%d"),"%Y")) # learned on stack overflow

glimpse(sightings)
```

Orcas, or killer whales, live together in pods. Around the San Juan Islands, lower Puget Sound, the Strait of Georgia and the Southern Canadian Gulf Islands, J pod is the most likely to be in the waters year-round. Historically, J pod has been known to frequent the west side of San Juan Island, in Haro Strait, during the summer months. In the last few years these sightings have become less consistent ([The Whale Trail](https://thewhaletrail.org/wt-species/j-pod/)).

This dataset was exported from iNaturalist on 2025-10-27. iNaturalist is a platform on which any user can upload wildlife sightings. They can log the species, location, and upload video and audio; other users can then agree or disagree with the identification. Research-grade sightings are verified. The data used in this analysis was drawn from iNaturalist sightings and filtered by verifiable orca observations in Washington state, and contains 1,399 observations. This dataset represents a sample of the total population of orcas and orca sightings.

### Columns

-   **id**: Unique, sequential identifier for the observation
-   **uuid**: Universally unique identifier for the observation. See https://datatracker.ietf.org/doc/html/rfc9562
-   **observed_on**: Normalized date of observation
-   **time_observed_at**: Normalized datetime of observation
-   **time_zone**: Time zone of observation
-   **user_name**: Name of the observer, generally used for attribution on the site. This is an optional field and may be a pseudonym
-   **created_at**: Datetime observation was created
-   **quality_grade**: Quality grade of this observation (all research)
-   **url**: URL for the observation
-   **image_url**: URL for the first photo associated with the observation
-   **sound_url**: URL for the first sound associated with the observation. Note this will only be present for direct uploads, not sounds hosted on 3rd-party services
-   **description**: Text written by the observer describing the observation or recording any other notes that seem relevant
-   **num_identification_agreements**: Number of identifications associated with taxa that match or are contained by the taxon from the observer's identification
-   **num_identification_disagreements**: Number of identifications associated with taxa that do not match and are not contained by the taxon from the observer's identification
-   **place_guess**: Locality description as entered by the observer
-   **latitude**: Publicly visible latitude from the observation location
-   **longitude**: Publicly visible longitude from the observation location
-   **private_place_guess**: Observation location as written by the observer if location obscured
-   **private_latitude**: Private latitude, set if observation private or obscured
-   **private_longitude**: Private longitude, set if observation private or obscured
-   **geoprivacy**: Whether or not the observer has chosen to obscure or hide the coordinates.
-   **coordinates_obscured**: Whether or not the coordinates have been obscured, either because of geoprivacy or because of a threatened taxon
-   **place_town_name**: The name of the town or city that contains this observation's coordinates, if known
-   **species_guess**: Plain text name of the observed taxon; can be set by the observer during observation creation, but can get replaced with canonical, localized names when the taxon changes
-   **scientific_name**: Scientific name of the observed taxon according to iNaturalist (All Orcinus orca)
-   **common_name**: Common or vernacular name of the observed taxon according to iNaturalist (All Orca)

## Research Questions (Descriptive)

In this analysis, we'll investigate the following question: Are killer whale sightings more common in some counties than others?

This analysis looks at point estimates using the mean and median. It uses these as opposed to a proportion or difference in means/medians because it would answer the research question more appropriately; the question is asking about the overall population, not two separate groups. A 95% confidence interval is calculated as this data represents a sample of a whole population.

## Inferential Analysis

```{r}
# mean number of sightings per place
place_totals <- sightings |>
  group_by(place_guess) |>
  summarize(total_sightings = n(), .groups = "drop")

place_totals |>
  specify(response = total_sightings) |>
  calculate(stat = "mean")
```

```{r}
# 95% CI mean sightings in each place
place_totals |>
  specify(response = total_sightings) |>
  generate(reps = 1000, type = "bootstrap") |>
  calculate(stat = "mean") |>
  get_confidence_interval(type = "percentile", level = 0.95)
```

```{r}
# median point estimate of each place
place_totals |>
  specify(response = total_sightings) |>
  calculate(stat = "median")
```

```{r}
# 95% CI median per place
place_totals |>
  specify(response = total_sightings) |>
  generate(reps = 1000, type = "bootstrap") |>
  calculate(stat = "median") |>
  get_confidence_interval(type = "percentile", level = 0.95)
```

## Conclusions and Interpretation of Analysis

Based on my confidence intervals, I found that the true mean number of sightings for all orcas in Washington is likely between 10 and 306.6 This is wide, and means that the conclusion is uncertain; this is likely due to the low number of observations.

From my confidence intervals, I can infer that:
1. Any mean per-county sighting between ~10 and 307 is plausible.
2. Any median per-county sighting between ~2.5 and 48 is plausible.

I can be confident that: 
1. Sightings are concentrated in certain counties (some counties will consistently have more sightings).
2. Most counties have few sightings (median low, lower CI near 2â€“3).

I noticed that the median number of sightings in each place is much lower than the mean; when looking at the data, I realized this is because the place_guess columns includes mostly counties, but also Washington and the USA (which have significantly more sightings than a single county).

### Validity

-   **Construct validity**: I wish there was a way to compare this dataset with all tracked orcas in the J-pod. Other than that, I found this data to be fairly comprehensive and clean, and containing all the data I needed.
-   **External validity**: While this data depicts killer whale populations (relative to just Washington) fairly accurately, there are a few things to note:
    -   iNaturalist does not contain all wildlife or orca sightings; it is only those uploaded by iNaturalist users (and therefore, it also only contains sightings after iNaturalist was created).
    -   Not all orcas have been observed by users; the number of orca whale sightings is different from total number of orcas.
    -   Different orca pods are known to have different behaviors; therefore, how social the J-pod is or how populated Washington is may affect the number of sightings relative to the population of killer whales overall.
-   **Internal validity**: Because this is a descriptive analysis and the data was observational, internal validity was not an issue.
